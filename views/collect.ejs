
<link rel="stylesheet" href="/jwysiwyg/jquery.wysiwyg.css" type="text/css" />
<script type="text/javascript" src="jwysiwyg/jquery.wysiwyg.js"></script>

<style>
	.question-label 
	{
		vertical-align: top;
	}
</style>
<script>
	
	function appendAnswerText(){
		$('#answerTypeDiv').append("<textarea rows='3' cols='103' disabled='true'>To be filled by the applicant.</textarea><br/>");
		$('#answerTypeDiv').append("<textarea id='textAnswer' rows='5' cols='103' disabled='true'></textarea>");
		$('#textAnswer').wysiwyg();
	}
	
	function appendAnswerOption(){
		var optionInput = "Option: <input name'option' /> <input name='answer' type='radio'>The answer?";
		var addOptionLink = "<a id='addAnswertOption' href='#'>Add Option</a>";
		$("#addAnswertOption").remove();
		$('#answerTypeDiv').append(optionInput+"&nbsp;&nbsp;"+addOptionLink+"<br/>");
		$("#addAnswertOption").click(appendAnswerOption);
	}

	function updateAnswerType() {
		var answerType = $('#answerType').val();
		$('#answerTypeDiv').html("");
		if(answerType == "Text") {
			appendAnswerText();
		} else if(answerType == "Multiple Choice") {
			appendAnswerOption();
		} 
	}
	
	function focusQuestionField(){
		// $('#wysiwyg').wysiwyg('focus'); does not work
		  $("#wysiwygIFrame")[0].contentWindow.focus();
	}
	
    $(function() {
    	//
    	// Intialize GUI
    	//
        $('#wysiwyg').wysiwyg();
		  
		  //
		  // Intialize Events
		  //
		  
		  $('#add-question').click(function() {
				var question = $('#wysiwyg').val();
				$.ajax({
					type: "POST",
					url: "/collect/question",
					data: {'question': question},
					dataType: "json",
					success: function(data) {
						alert("question added..."+ data);
					},
					error: function(err) {
						var msg = 'Status: ' + err.status + ': ' + err.responseText;
						alert(msg);
						focusQuestionField();
					}
				});
				return false;
			});
		  
		  // Init focus for page
		  focusQuestionField();
		  updateAnswerType();
    });
</script>
<table>
	<tr>
		<td class="question-label"><b>Question</b></td>
		<td>
			<div>
				<textarea id="wysiwyg" rows="5" cols="103"></textarea>
			</div>
		</td>
	</tr>
	<tr>
		<td class="question-label"><b>Answer</b></td>
		<td>
			<select id="answerType" onchange="updateAnswerType()">
				<option>Text</option>
				<option>Multiple Choice</option>
			</select>
			<br/><br/>
			<div id="answerTypeDiv"></div>
		</td>
	</tr>
	<tr>
		<td class="question-label"><b>Area</b></td>
		<td>
			<select id="answerType" onchange="updateAnswerType()">
				<option>General Programming</option>
				<option>Desktop Development</option>
				<option>Web Development</option>
				<option>Mobile Development</option>
				<option>Database</option>
			</select>
		</td>
	</tr>
	<tr>
		<td class="question-label"><b>Level</b></td>
		<td>
			<select id="answerType" onchange="updateAnswerType()">
				<option>Basic</option>
				<option>Intermediate</option>
				<option>Advanced</option>
			</select>
		</td>
	</tr>
</table>
<br/>
<a id="add-question" href="#">Submit Question</a>



